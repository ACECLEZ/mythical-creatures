<!DOCTYPE html>
<html>

<head>
  <title>Questionnaire Framework</title>
  <style>
    .question {
      margin-bottom: 10px;
      display: none; /* Hide questions by default */
    }
  </style>
</head>

<body>
  <div id="questionnaire">
    <h1>Questionnaire</h1>
    <form id="questionForm">
      <div id="questionContainer">
        <!-- Current question will be dynamically added here -->
      </div>
      <button type="submit">Submit</button>
    </form>
  </div>

  <script>
    // Load questions and answers from JSON via link
    fetch('https://example.com/questions.json')
      .then(response => response.json())
      .then(data => {
        // Create a new instance of the Questionnaire class
        const questionnaire = new Questionnaire();

        // Add questions to the questionnaire
        data.forEach(question => {
          questionnaire.addQuestion(question.question, question.answers, question.correctAnswer);
        });

        // Render the first question
        questionnaire.renderNextQuestion();
      })
      .catch(error => {
        console.error('Failed to load questions:', error);
      });

    // Questionnaire framework using JavaScript
    class Questionnaire {
      constructor() {
        this.questions = [];
        this.currentQuestionIndex = 0;
      }

      addQuestion(question, answers, correctAnswer) {
        this.questions.push({ question, answers, correctAnswer });
      }

      renderNextQuestion() {
        const questionContainer = document.getElementById('questionContainer');
        questionContainer.innerHTML = '';

        const question = this.questions[this.currentQuestionIndex];
        const questionDiv = document.createElement('div');
        questionDiv.className = 'question';
        const randomAnswers = this.shuffleArray(question.answers);
        questionDiv.innerHTML = `
          <label for="question">${question.question}</label>
          <select id="question" name="question">
            ${randomAnswers.map(answer => `<option value="${answer}">${answer}</option>`).join('')}
          </select>
        `;
        questionContainer.appendChild(questionDiv);

        this.currentQuestionIndex++;
      }

      shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }
    }

    // Handle form submission
    const questionForm = document.getElementById('questionForm');
    questionForm.addEventListener('submit', (event) => {
      event.preventDefault();

      // Retrieve and process form data
      const formData = new FormData(questionForm);
      const selectedAnswer = formData.get('question');

      // Check answer against correct answer
      const question = this.questions[this.currentQuestionIndex - 1];
      if (question.correctAnswer === selectedAnswer) {
        alert('Correct!');
      } else {
        alert('Incorrect!');
      }

      // Render the next question or display score if all questions are answered
      if (this.currentQuestionIndex < this.questions.length) {
        this.renderNextQuestion();
      } else {
        const score = this.calculateScore();
        alert(`Your score: ${score}/${this.questions.length}`);
      }
    });
  </script>
</body>

</html>
