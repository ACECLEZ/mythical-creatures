<!DOCTYPE html>
<html>

<head>
  <title>Questionnaire Framework</title>
  <style>
    .question {
      margin-bottom: 10px;
    }
  </style>
</head>

<body>
  <div id="questionnaire">
    <h1>Questionnaire</h1>
    <form id="questionForm">
      <div id="questionsContainer">
        <!-- Questions will be dynamically added here -->
      </div>
      <button type="submit">Submit</button>
    </form>
  </div>

  <script>
    // Load questions and answers from JSON via link
    fetch('https://pwcreatures.vercel.app/main/pract/info.json')
      .then(response => response.json())
      .then(data => {
        // Create a new instance of the Questionnaire class
        const questionnaire = new Questionnaire();

        // Add questions to the questionnaire
        data.forEach(question => {
          questionnaire.addQuestion(question.question, question.answers, question.correctAnswer);
        });

        // Render the questionnaire
        questionnaire.render();
      })
      .catch(error => {
        console.error('Failed to load questions:', error);
      });

    // Questionnaire framework using JavaScript
    class Questionnaire {
      constructor() {
        this.questions = [];
      }

      addQuestion(question, answers, correctAnswer) {
        this.questions.push({ question, answers, correctAnswer });
      }

      render() {
        const questionsContainer = document.getElementById('questionsContainer');
        questionsContainer.innerHTML = '';

        this.questions.forEach((question, index) => {
          const questionDiv = document.createElement('div');
          questionDiv.className = 'question';
          const randomAnswers = this.shuffleArray(question.answers);
          questionDiv.innerHTML = `
            <label for="question${index}">${question.question}</label>
            <select id="question${index}" name="question${index}">
              ${randomAnswers.map(answer => `<option value="${answer}">${answer}</option>`).join('')}
            </select>
          `;
          questionsContainer.appendChild(questionDiv);
        });
      }

      shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }
    }

    // Handle form submission
    const questionForm = document.getElementById('questionForm');
    questionForm.addEventListener('submit', (event) => {
      event.preventDefault();

      // Retrieve and process form data
      const formData = new FormData(questionForm);
      const answers = [];
      for (let i = 0; i < questionForm.elements.length; i++) {
        const element = questionForm.elements[i];
        if (element.tagName === 'SELECT') {
          answers.push(element.value);
        }
      }

      // Check answers against correct answers
      const score = this.questions.reduce((totalScore, question, index) => {
        if (question.correctAnswer === answers[index]) {
          return totalScore + 1;
        } else {
          return totalScore;
        }
      }, 0);

      // Display the score
      alert(`Your score: ${score}/${this.questions.length}`);
    });
  </script>
</body>

</html>
